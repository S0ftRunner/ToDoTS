(()=>{"use strict";const t=document.querySelector(".content"),e=document.querySelector(".popup"),i=new class Page{constructor(t){this.container=t,this._formContainer=this.container.querySelector(".todo-form-container"),this._todoContainer=this.container.querySelector(".todos__list")}set todoContainer(t){this._todoContainer.replaceChildren(...t)}set formContainer(t){t?this._formContainer.replaceChildren(t):this._formContainer.innerHTML=""}}(t),o=new class ToDoModel{constructor(){this._items=[]}set items(t){this._items=t}get items(){return this._items}addItem(t){const e=Math.max(...this._items.map((t=>Number(t.id))))+1,i={id:String(e),name:t};return this._items.push(i),i}removeItem(t){this._items=this._items.filter((e=>e.id!==t))}getItem(t){return this._items.find((e=>e.id===t))}editItem(t,e){this._items.find((e=>e.id===t)).name=e}};o.items=[{id:"1",name:"Сделать проектную работу"},{id:"2",name:"Полить цветы"},{id:"3",name:"Пройти туториал по Реакту"},{id:"4",name:"Сделать фронт для своего проекта"},{id:"5",name:"Погулять с собакой"},{id:"6",name:"Разобраться в замыканиях"},{id:"7",name:"Решить задачу на Codewars"}];const n=new class Popup{constructor(t){this.container=t,this.closeButton=t.querySelector(".popup__close"),this._content=t.querySelector(".popup__content"),this.closeButton.addEventListener("click",this.close.bind(this)),this.container.addEventListener("click",this.close.bind(this)),this._content.addEventListener("click",(t=>{t.stopPropagation()}))}set content(t){this._content.replaceChildren(t)}open(){this.container.classList.add("popup_is-opened")}close(){this.container.classList.remove("popup_is-opened"),this.content=null}}(e),s=new class ItemPresenter{constructor(t,e,i,o,n){this.model=t,this.formConstuctor=e,this.viewPageContainer=i,this.viewItemConstructor=o,this.modal=n,this.itemTemplate=document.querySelector("#todo-item-template"),this.formTemplate=document.querySelector("#todo-form-template")}init(){this.todoForm=new this.formConstuctor(this.formTemplate),this.todoForm.setHandler(this.handleFormSubmit.bind(this)),this.todoForm.buttonText="Добавить",this.todoForm.placeholder="Следующее дело",this.viewPageContainer.formContainer=this.todoForm.render(),this.todoEditForm=new this.formConstuctor(this.formTemplate),this.todoEditForm.buttonText="Изменить",this.todoEditForm.placeholder="Новое название"}handleFormSubmit(t){this.model.addItem(t),this.renderView(),this.todoForm.clearValue()}handleSubmitEditForm(t,e){this.model.editItem(e,t),this.renderView(),this.todoEditForm.clearValue(),this.modal.close()}handleCopyItem(t){const e=this.model.getItem(t.id);this.model.addItem(e.name),this.renderView()}handleDeleteItem(t){this.model.removeItem(t.id),this.renderView()}handleEditItem(t){const e=this.model.getItem(t.id);this.todoEditForm.setValue(e.name),this.modal.content=this.todoEditForm.render(),this.todoEditForm.setHandler((e=>this.handleSubmitEditForm(e,t.id))),this.modal.open()}renderView(){const t=this.model.items.map((t=>{const e=new this.viewItemConstructor(this.itemTemplate);e.setCopyHandler(this.handleCopyItem.bind(this)),e.setDeleteHandler(this.handleDeleteItem.bind(this));return e.render(t)})).reverse();this.viewPageContainer.todoContainer=t}}(o,class Form{constructor(t){this.formElement=t.content.querySelector(".todos__form").cloneNode(!0),this.inputField=this.formElement.querySelector(".todo-form__input"),this.submitButton=this.formElement.querySelector(".todo-form__submit-btn"),this.formElement.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this.inputField.value)}))}setHandler(t){this.handleFormSubmit=t}render(){return this.formElement}setValue(t){this.inputField.value=t}getValue(){return this.inputField.value}clearValue(){this.formElement.reset()}set buttonText(t){this.submitButton.textContent=t}set placeholder(t){this.inputField.placeholder=t}},i,class Item{constructor(t){this.itemElement=t.content.querySelector(".todo-item").cloneNode(!0),this.title=this.itemElement.querySelector(".todo-item__text"),this.copyButton=this.itemElement.querySelector(".todo-item__copy"),this.deleteButton=this.itemElement.querySelector(".todo-item__del"),this.editButton=this.itemElement.querySelector(".todo-item__edit")}get id(){return this._id||""}set id(t){this._id=t}get name(){return this.title.textContent||""}set name(t){this.title.textContent=t}setCopyHandler(t){this.handleCopyItem=t,this.copyButton.addEventListener("click",(t=>{this.handleCopyItem(this)}))}setDeleteHandler(t){this.handleDeleteItem=t,this.deleteButton.addEventListener("click",(t=>{this.handleDeleteItem(this)}))}setEditHandler(t){this.handleEditItem=t,this.editButton.addEventListener("click",(t=>{this.handleEditItem(this)}))}render(t){return this.name=t.name,this.id=t.id,this.itemElement}},n);s.init(),s.renderView()})();
//# sourceMappingURL=main.js.map